<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXT-HUB | Lite Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #0d0d0d;
            --bg-header: radial-gradient(circle at center, #1a1a1a 0%, #0d0d0d 100%);
            --bg-card: #181818;
            --bg-nav: rgba(13, 13, 13, 0.9);
            --bg-sidebar: #121212;
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
            --border-color: #2c2c2c;
            --scratch-blue: #4d97ff;
            --egov-red: #e63946;
            --supabase-green: #3ecf8e;
            --like-color: #ff4757;
        }
        body.weather-rainy { --bg-body: #0f172a; --bg-header: linear-gradient(180deg, #1e293b 0%, #0f172a 100%); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', 'Noto Sans JP', sans-serif; background-color: var(--bg-body); color: var(--text-main); line-height: 1.6; transition: 1s; }

        /* åˆ¶å¾¡ */
        #home-radio, #news-radio, #memo-radio, #general-radio, #sidebar-check, #show-more-check { display: none !important; }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ä¿®æ­£ï¼šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®éš£ã«ã‚¿ã‚¤ãƒˆãƒ« */
        nav { padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; background: var(--bg-nav); backdrop-filter: blur(15px); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border-color); }
        .nav-left { display: flex; align-items: center; gap: 15px; }
        .logo { font-weight: 700; font-size: 1.2rem; letter-spacing: 1px; }
        .menu-icon { cursor: pointer; font-size: 1.5rem; }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ä¿®æ­£ï¼šä¸€è¡Œè¡¨ç¤º */
        .sidebar { position: fixed; top: 0; left: -300px; width: 300px; height: 100%; background: var(--bg-sidebar); z-index: 150; transition: 0.4s; padding: 80px 20px; border-right: 1px solid var(--border-color); }
        #sidebar-check:checked ~ .sidebar { left: 0; }
        .sidebar-item { display: block; color: var(--text-main); text-decoration: none; padding: 15px 10px; border-bottom: 1px solid var(--border-color); cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 140; display: none; }
        #sidebar-check:checked ~ .overlay { display: block; }

        /* ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ */
        .page-content { display: none; animation: fadeIn 0.4s ease; }
        #home-radio:checked ~ .container #home-page,
        #news-radio:checked ~ .container #news-page,
        #memo-radio:checked ~ .container #memo-page,
        #general-radio:checked ~ .container #general-page { display: block; }

        header { text-align: center; padding: 50px 20px; background: var(--bg-header); }
        .container { max-width: 1200px; margin: 0 auto; padding: 30px 5%; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; }
        .card { background: #1a1a1a; border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; transition: 0.3s; }
        .card img { width: 100%; border-radius: 8px; aspect-ratio: 16/9; object-fit: cover; }
        .card:hover { border-color: var(--scratch-blue); }
        
        .search-box { background: #222; border: 1px solid #333; padding: 8px 15px; border-radius: 20px; color: #fff; width: 250px; outline: none; }

        /* ãƒ¡ãƒ¢å¸³ã‚¨ãƒªã‚¢ */
        .memo-box { background: var(--bg-card); border-radius: 15px; padding: 20px; border: 1px solid var(--border-color); }
        textarea { width: 100%; height: 200px; background: #000; color: #fff; border: 1px solid #333; padding: 15px; border-radius: 10px; resize: none; outline: none; margin-bottom: 10px; }

        .btn { padding: 8px 18px; border-radius: 6px; cursor: pointer; border: none; font-weight: 600; transition: 0.2s; }
        .btn-p { background: #fff; color: #000; text-decoration: none; display: inline-block; margin-top: 10px; }
        .btn-p:hover { opacity: 0.8; }

        .search-hide { display: none !important; }
        .more-content { display: none; }
        #show-more-check:checked ~ .container #home-page .more-content { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <input type="radio" name="page" id="home-radio" checked>
    <input type="radio" name="page" id="news-radio">
    <input type="radio" name="page" id="memo-radio">
    <input type="radio" name="page" id="general-radio">
    <input type="checkbox" id="sidebar-check">
    <input type="checkbox" id="show-more-check">

    <nav>
        <div class="nav-left">
            <label for="sidebar-check" class="menu-icon">â˜°</label>
            <div class="logo">NEXT-HUB</div>
        </div>
        <input type="text" id="js-search" class="search-box" placeholder="ä½œå“å, @ãƒ¦ãƒ¼ã‚¶ãƒ¼, ID...">
    </nav>

    <aside class="sidebar">
        <label for="home-radio" class="sidebar-item" onclick="closeSidebar()">ğŸ  Scratchå…±æœ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </label>
        <label for="general-radio" class="sidebar-item" onclick="closeSidebar()">ğŸŒ é–‹ç™ºãƒªã‚½ãƒ¼ã‚¹ (e-Gov / Supabase)</label>
        <label for="memo-radio" class="sidebar-item" onclick="closeSidebar()">ğŸ“ ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ¢ / ã‚¢ã‚¤ãƒ‡ã‚¢å¸³</label>
        <label for="news-radio" class="sidebar-item" onclick="closeSidebar()">ğŸ“° æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹</label>
        <a href="https://discord.gg/hgJ5pCdYK6" class="sidebar-item" target="_blank">ğŸ’¬ å…¬å¼Discordã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</a>
    </aside>
    <label for="sidebar-check" class="overlay"></label>

    <header>
        <div id="weather-text" style="font-size: 0.8rem; opacity: 0.7; margin-bottom:10px;">Loading Weather...</div>
        <h1 id="h-title">NEXT-HUB</h1>
        <p id="h-desc" style="color:var(--text-sub);">Scratchã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ ï¼† é–‹ç™ºãƒªã‚½ãƒ¼ã‚¹</p>
    </header>

    <main class="container">
        <div id="ext-res-area" style="display:none; margin-bottom: 40px;">
            <h2 style="color:var(--scratch-blue); margin-bottom:20px;">Scratch æ¤œç´¢çµæœ</h2>
            <div id="ext-output" class="grid"></div>
        </div>

        <div id="home-page" class="page-content">
            <h2 style="margin-bottom:20px;">ä»Šé€±ã®ãƒˆãƒ¬ãƒ³ãƒ‰</h2>
            <div id="weekly-area" class="grid" style="margin-bottom:50px;"></div>

            <h2 style="margin-bottom:20px;">ç™»éŒ²ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h2>
            <div class="grid" id="main-grid">
                <div class="card scratch-project"><img src="https://scratch.mit.edu/get_image/project/1259915297_480x360.png"><h3>ãƒ–ãƒ¬ã‚¤ãƒ³ãƒ­ãƒƒãƒˆ ã‚¯ãƒªãƒƒã‚«ãƒ¼</h3><a href="https://scratch.mit.edu/projects/1259915297/" class="btn btn-p" target="_blank">é–‹ã</a></div>
                <div class="card scratch-project"><img src="https://scratch.mit.edu/get_image/project/307476661_480x360.png"><h3>3D Open World</h3><a href="https://scratch.mit.edu/projects/307476661/" class="btn btn-p" target="_blank">é–‹ã</a></div>
                <div class="card scratch-project more-content"><img src="https://uploads.scratch.mit.edu/get_image/project/1163188471_480x360.png"><h3>ã‚ªãƒ¬ãƒ³ã‚¸ãƒ”ãƒ³ãƒãƒ³</h3><a href="https://scratch.mit.edu/projects/1163188471/" class="btn btn-p" target="_blank">é–‹ã</a></div>
                <div class="card scratch-project more-content"><img src="https://uploads.scratch.mit.edu/get_image/project/1134606936_480x360.png"><h3>ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«</h3><a href="https://scratch.mit.edu/projects/1134606936/" class="btn btn-p" target="_blank">é–‹ã</a></div>
                <div class="card scratch-project more-content"><img src="https://uploads.scratch.mit.edu/get_image/project/1261118333_480x360.png"><h3>ç«‹ã¡çµµä½œã£ãŸã‚ˆãƒ¼ï¼</h3><a href="https://scratch.mit.edu/projects/1261118333/" class="btn btn-p" target="_blank">é–‹ã</a></div>
                <div class="card scratch-project more-content"><img src="https://uploads.scratch.mit.edu/get_image/project/1238399568_480x360.png"><h3>Get The Frog Out Of Here!</h3><a href="https://scratch.mit.edu/projects/1238399568/" class="btn btn-p" target="_blank">é–‹ã</a></div>
            </div>
            <label for="show-more-check" class="btn" style="display:block; width:fit-content; margin:30px auto; background:#333; color:#fff;">ã‚‚ã£ã¨è¦‹ã‚‹</label>
        </div>

        <div id="general-page" class="page-content">
            <h2 style="color:var(--egov-red); margin-bottom:20px;">e-Gov & Supabase æƒ…å ±</h2>
            <div class="grid">
                <div class="card"><h3>e-Gov API</h3><p>æ—¥æœ¬ã®è¡Œæ”¿ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿åŸºç›¤</p><a href="https://api-catalog.e-gov.go.jp/" class="btn btn-p" target="_blank">ã‚«ã‚¿ãƒ­ã‚°</a></div>
                <div class="card"><h3>Supabase</h3><p>æ¬¡ä¸–ä»£ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤</p><a href="https://supabase.com/" class="btn btn-p" target="_blank">å…¬å¼ã‚µã‚¤ãƒˆ</a></div>
            </div>
        </div>

        <div id="memo-page" class="page-content">
            <div class="memo-box">
                <h2 style="margin-bottom:15px;">ğŸ“ ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ¢</h2>
                <p style="font-size: 0.8rem; color:var(--text-sub); margin-bottom:10px;">ãƒ–ãƒ©ã‚¦ã‚¶ã«è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™ã€‚ã‚¢ã‚¤ãƒ‡ã‚¢ã®æ›¸ãç•™ã‚ã«ã©ã†ãã€‚</p>
                <textarea id="memo-area" placeholder="ã“ã“ã«ãƒ¡ãƒ¢ã‚’æ›¸ã„ã¦ãã ã•ã„..."></textarea>
                <button onclick="saveMemo()" class="btn" style="background:var(--supabase-green); color:#000;">ä¿å­˜å®Œäº†</button>
            </div>
        </div>
        
        <div id="news-page" class="page-content">
            <div class="card" style="border-left:4px solid #fff;">
                <small>2026.01.04</small>
                <h3>Lite Edition ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ</h3>
                <p>AIæ©Ÿèƒ½ã‚’å‰Šé™¤ã—ã€GitHub Pagesã§å³åº§ã«å‹•ä½œã™ã‚‹è»½é‡ç‰ˆã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚</p>
            </div>
        </div>

        <section class="interaction-area" style="text-align:center; margin-top:50px; padding:30px; background:var(--bg-card); border-radius:15px;">
            <button class="btn" style="background:var(--like-color); color:white; border-radius:50px;" onclick="sendLike()">â¤ ã„ã„ã­ï¼ <span id="like-count">0</span></button>
        </section>
    </main>

    <script>
        function closeSidebar() { document.getElementById('sidebar-check').checked = false; }

        // --- ã„ã„ã­ & ãƒ¡ãƒ¢ (localStorage) ---
        let likes = parseInt(localStorage.getItem('nh_likes')) || 0;
        document.getElementById('like-count').innerText = likes;
        function sendLike() {
            likes++;
            document.getElementById('like-count').innerText = likes;
            localStorage.setItem('nh_likes', likes);
        }

        const memoArea = document.getElementById('memo-area');
        memoArea.value = localStorage.getItem('nh_memo') || "";
        function saveMemo() {
            localStorage.setItem('nh_memo', memoArea.value);
            alert("ãƒ¡ãƒ¢ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã—ã¾ã—ãŸï¼");
        }

        // --- Scratch åå‰æ¤œç´¢ ---
        document.getElementById('js-search').addEventListener('input', async (e) => {
            const query = e.target.value.trim().toLowerCase();
            document.querySelectorAll('.scratch-project').forEach(p => {
                const title = p.querySelector('h3').innerText.toLowerCase();
                p.classList.toggle('search-hide', !title.includes(query));
            });
            const extArea = document.getElementById('ext-res-area');
            if (query.startsWith('@') && query.length > 2) {
                fetchScratchAPI(`https://api.scratch.mit.edu/users/${query.substring(1)}`, 'user');
            } else if (/^\d{5,}$/.test(query)) {
                fetchScratchAPI(`https://api.scratch.mit.edu/projects/${query}`, 'project');
            } else { extArea.style.display = 'none'; }
        });

        async function fetchScratchAPI(url, type) {
            try {
                const res = await fetch(`https://corsproxy.io/?${url}`);
                const data = await res.json();
                document.getElementById('ext-res-area').style.display = 'block';
                const out = document.getElementById('ext-output');
                if (type === 'user') {
                    out.innerHTML = `<div class="card"><h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼: ${data.username}</h3><a href="https://scratch.mit.edu/users/${data.username}" class="btn btn-p" target="_blank">ãƒ—ãƒ­ãƒ•</a></div>`;
                } else {
                    out.innerHTML = `<div class="card"><img src="${data.image}"><h3>${data.title}</h3><a href="https://scratch.mit.edu/projects/${data.id}" class="btn btn-p" target="_blank">é–‹ã</a></div>`;
                }
            } catch(e) {}
        }

        // --- ãƒˆãƒ¬ãƒ³ãƒ‰ & å¤©æ°— ---
        fetch(`https://corsproxy.io/?https://api.scratch.mit.edu/explore/projects?mode=trending&q=*`)
            .then(r => r.json()).then(data => {
                const area = document.getElementById('weekly-area');
                data.slice(0, 3).forEach(p => {
                    area.innerHTML += `<div class="card"><img src="${p.image}"><h3>${p.title}</h3><a href="https://scratch.mit.edu/projects/${p.id}" class="btn btn-p" target="_blank">è¦‹ã‚‹</a></div>`;
                });
            });

        fetch('https://api.open-meteo.com/v1/forecast?latitude=35.68&longitude=139.76&current_weather=true')
            .then(r => r.json()).then(d => {
                document.getElementById('weather-text').innerText = `Tokyo: ${d.current_weather.temperature}Â°C`;
                if(d.current_weather.weathercode >= 51) document.body.classList.add('weather-rainy');
            });

        // ãƒšãƒ¼ã‚¸åˆ‡æ›¿
        const pageMeta = { 'home-radio': 'NEXT-HUB', 'general-radio': 'RESOURCES', 'memo-radio': 'QUICK MEMO', 'news-radio': 'NEWS' };
        Object.keys(pageMeta).forEach(id => {
            document.getElementById(id).addEventListener('change', () => {
                document.getElementById('h-title').innerText = pageMeta[id];
            });
        });
    </script>
</body>
</html>
